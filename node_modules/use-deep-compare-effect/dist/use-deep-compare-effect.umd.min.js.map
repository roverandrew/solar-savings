{"version":3,"file":"use-deep-compare-effect.umd.min.js","sources":["../src/index.js","../node_modules/dequal/dist/dequal.mjs"],"sourcesContent":["import React from 'react'\nimport deepEqual from 'dequal'\n\nfunction checkDeps(deps) {\n  if (!deps || !deps.length) {\n    throw new Error(\n      'useDeepCompareEffect should not be used with no dependencies. Use React.useEffect instead.',\n    )\n  }\n  if (deps.every(isPrimitive)) {\n    throw new Error(\n      'useDeepCompareEffect should not be used with dependencies that are all primitive values. Use React.useEffect instead.',\n    )\n  }\n}\n\nfunction isPrimitive(val) {\n  return val == null || /^[sbn]/.test(typeof val)\n}\n\nfunction useDeepCompareMemoize(value) {\n  const ref = React.useRef()\n\n  if (!deepEqual(value, ref.current)) {\n    ref.current = value\n  }\n\n  return ref.current\n}\n\nfunction useDeepCompareEffect(callback, dependencies) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkDeps(dependencies)\n  }\n  React.useEffect(callback, useDeepCompareMemoize(dependencies))\n}\n\nexport function useDeepCompareEffectNoCheck(callback, dependencies) {\n  React.useEffect(callback, useDeepCompareMemoize(dependencies))\n}\n\nexport default useDeepCompareEffect\n","export default function dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\t\tif (ctor === Array && (len=foo.length) === bar.length) {\n\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\treturn len === -1;\n\t\t}\n\t\tif (ctor === Object) {\n\t\t\tif (Object.keys(foo).length !== Object.keys(bar).length) return false;\n\t\t\tfor (len in foo) if (!(len in bar) || !dequal(foo[len], bar[len])) return false;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn foo !== foo && bar !== bar;\n}\n"],"names":["useDeepCompareMemoize","value","ref","React","useRef","dequal","foo","bar","ctor","len","constructor","Date","getTime","RegExp","toString","Array","length","Object","keys","deepEqual","current","callback","dependencies","useEffect"],"mappings":"qPAoBA,SAASA,EAAsBC,OACvBC,EAAMC,EAAMC,gBCrBL,SAASC,EAAOC,EAAKC,OAC/BC,EAAMC,KACNH,IAAQC,EAAK,OAAO,KACpBD,GAAOC,IAAQC,EAAKF,EAAII,eAAiBH,EAAIG,YAAa,IACzDF,IAASG,KAAM,OAAOL,EAAIM,YAAcL,EAAIK,aAC5CJ,IAASK,OAAQ,OAAOP,EAAIQ,aAAeP,EAAIO,cAC/CN,IAASO,QAAUN,EAAIH,EAAIU,UAAYT,EAAIS,OAAQ,MAC/CP,KAASJ,EAAOC,EAAIG,GAAMF,EAAIE,aACrB,IAATA,KAEJD,IAASS,OAAQ,IAChBA,OAAOC,KAAKZ,GAAKU,SAAWC,OAAOC,KAAKX,GAAKS,OAAQ,OAAO,MAC3DP,KAAOH,OAAWG,KAAOF,GAASF,EAAOC,EAAIG,GAAMF,EAAIE,KAAO,OAAO,SACnE,UAGFH,GAAQA,GAAOC,GAAQA,EDOxBY,CAAUlB,EAAOC,EAAIkB,WACxBlB,EAAIkB,QAAUnB,GAGTC,EAAIkB,qFAGb,SAA8BC,EAAUC,GAItCnB,EAAMoB,UAAUF,EAAUrB,EAAsBsB,mCAG3C,SAAqCD,EAAUC,GACpDnB,EAAMoB,UAAUF,EAAUrB,EAAsBsB"}