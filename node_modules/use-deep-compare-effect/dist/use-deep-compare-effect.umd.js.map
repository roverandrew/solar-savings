{"version":3,"file":"use-deep-compare-effect.umd.js","sources":["../node_modules/dequal/dist/dequal.mjs","../src/index.js"],"sourcesContent":["export default function dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\t\tif (ctor === Array && (len=foo.length) === bar.length) {\n\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\treturn len === -1;\n\t\t}\n\t\tif (ctor === Object) {\n\t\t\tif (Object.keys(foo).length !== Object.keys(bar).length) return false;\n\t\t\tfor (len in foo) if (!(len in bar) || !dequal(foo[len], bar[len])) return false;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn foo !== foo && bar !== bar;\n}\n","import React from 'react'\nimport deepEqual from 'dequal'\n\nfunction checkDeps(deps) {\n  if (!deps || !deps.length) {\n    throw new Error(\n      'useDeepCompareEffect should not be used with no dependencies. Use React.useEffect instead.',\n    )\n  }\n  if (deps.every(isPrimitive)) {\n    throw new Error(\n      'useDeepCompareEffect should not be used with dependencies that are all primitive values. Use React.useEffect instead.',\n    )\n  }\n}\n\nfunction isPrimitive(val) {\n  return val == null || /^[sbn]/.test(typeof val)\n}\n\nfunction useDeepCompareMemoize(value) {\n  const ref = React.useRef()\n\n  if (!deepEqual(value, ref.current)) {\n    ref.current = value\n  }\n\n  return ref.current\n}\n\nfunction useDeepCompareEffect(callback, dependencies) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkDeps(dependencies)\n  }\n  React.useEffect(callback, useDeepCompareMemoize(dependencies))\n}\n\nexport function useDeepCompareEffectNoCheck(callback, dependencies) {\n  React.useEffect(callback, useDeepCompareMemoize(dependencies))\n}\n\nexport default useDeepCompareEffect\n"],"names":["dequal","foo","bar","ctor","len","constructor","Date","getTime","RegExp","toString","Array","length","Object","keys","checkDeps","deps","Error","every","isPrimitive","val","test","useDeepCompareMemoize","value","ref","React","useRef","deepEqual","current","useDeepCompareEffect","callback","dependencies","useEffect","useDeepCompareEffectNoCheck"],"mappings":";;;;;;;;CAAe,SAASA,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;CACxC,MAAIC,IAAJ,EAAUC,GAAV;CACA,MAAIH,GAAG,KAAKC,GAAZ,EAAiB,OAAO,IAAP;;CACjB,MAAID,GAAG,IAAIC,GAAP,IAAc,CAACC,IAAI,GAACF,GAAG,CAACI,WAAV,MAA2BH,GAAG,CAACG,WAAjD,EAA8D;CAC7D,QAAIF,IAAI,KAAKG,IAAb,EAAmB,OAAOL,GAAG,CAACM,OAAJ,OAAkBL,GAAG,CAACK,OAAJ,EAAzB;CACnB,QAAIJ,IAAI,KAAKK,MAAb,EAAqB,OAAOP,GAAG,CAACQ,QAAJ,OAAmBP,GAAG,CAACO,QAAJ,EAA1B;;CACrB,QAAIN,IAAI,KAAKO,KAAT,IAAkB,CAACN,GAAG,GAACH,GAAG,CAACU,MAAT,MAAqBT,GAAG,CAACS,MAA/C,EAAuD;CACtD,aAAOP,GAAG,MAAMJ,MAAM,CAACC,GAAG,CAACG,GAAD,CAAJ,EAAWF,GAAG,CAACE,GAAD,CAAd,CAAtB;;CACA,aAAOA,GAAG,KAAK,CAAC,CAAhB;CACA;;CACD,QAAID,IAAI,KAAKS,MAAb,EAAqB;CACpB,UAAIA,MAAM,CAACC,IAAP,CAAYZ,GAAZ,EAAiBU,MAAjB,KAA4BC,MAAM,CAACC,IAAP,CAAYX,GAAZ,EAAiBS,MAAjD,EAAyD,OAAO,KAAP;;CACzD,WAAKP,GAAL,IAAYH,GAAZ;CAAiB,YAAI,EAAEG,GAAG,IAAIF,GAAT,KAAiB,CAACF,MAAM,CAACC,GAAG,CAACG,GAAD,CAAJ,EAAWF,GAAG,CAACE,GAAD,CAAd,CAA5B,EAAkD,OAAO,KAAP;CAAnE;;CACA,aAAO,IAAP;CACA;CACD;;CACD,SAAOH,GAAG,KAAKA,GAAR,IAAeC,GAAG,KAAKA,GAA9B;CACA;;CCdD,SAASY,SAAT,CAAmBC,IAAnB,EAAyB;CACvB,MAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAACJ,MAAnB,EAA2B;CACzB,UAAM,IAAIK,KAAJ,CACJ,4FADI,CAAN;CAGD;;CACD,MAAID,IAAI,CAACE,KAAL,CAAWC,WAAX,CAAJ,EAA6B;CAC3B,UAAM,IAAIF,KAAJ,CACJ,uHADI,CAAN;CAGD;CACF;;CAED,SAASE,WAAT,CAAqBC,GAArB,EAA0B;CACxB,SAAOA,GAAG,IAAI,IAAP,IAAe,SAASC,IAAT,CAAc,OAAOD,GAArB,CAAtB;CACD;;CAED,SAASE,qBAAT,CAA+BC,KAA/B,EAAsC;CACpC,MAAMC,GAAG,GAAGC,KAAK,CAACC,MAAN,EAAZ;;CAEA,MAAI,CAACC,MAAS,CAACJ,KAAD,EAAQC,GAAG,CAACI,OAAZ,CAAd,EAAoC;CAClCJ,IAAAA,GAAG,CAACI,OAAJ,GAAcL,KAAd;CACD;;CAED,SAAOC,GAAG,CAACI,OAAX;CACD;;CAED,SAASC,oBAAT,CAA8BC,QAA9B,EAAwCC,YAAxC,EAAsD;CAElDhB,EAAAA,SAAS,CAACgB,YAAD,CAAT;CAEFN,EAAAA,KAAK,CAACO,SAAN,CAAgBF,QAAhB,EAA0BR,qBAAqB,CAACS,YAAD,CAA/C;CACD;;AAED,CAAO,SAASE,2BAAT,CAAqCH,QAArC,EAA+CC,YAA/C,EAA6D;CAClEN,EAAAA,KAAK,CAACO,SAAN,CAAgBF,QAAhB,EAA0BR,qBAAqB,CAACS,YAAD,CAA/C;CACD;;;;;;;;;;;;;"}